# PDF 페이지 수는 보이는데 내용이 안 보이는 현상

## 현상

- 모달 안에서 PDF를 띄우면 **페이지 수는 정확히 표시**되지만  
- **페이지 본문(텍스트·이미지)은 비어 있거나 흰 화면**으로 나옵니다.

## 원인

### 1. 브라우저 내장 PDF 뷰어의 embed/iframe 제한 (가장 흔한 원인)

Chrome 등 많은 브라우저는 **`<embed>` / `<iframe>` 안에서** PDF를 띄울 때:

- PDF **파일은 정상적으로 받아서** 메타정보(페이지 수 등)를 파싱하고
- 그 정보만 이용해 **상단 툴바·페이지 수**는 그려 주지만  
- **실제 페이지를 그리는 영역**은 보안/정책 때문에 **비우거나 제한**하는 경우가 있습니다.

그래서 “페이지 수는 맞게 나오는데, 내용만 안 보인다”는 현상이 생깁니다.  
즉, **파일/서버 문제가 아니라 브라우저가 embed 안의 PDF 본문 렌더링을 제한**하는 동작에 가깝습니다.

### 2. 그밖에 있을 수 있는 원인

- **X-Frame-Options**: embed/iframe 허용을 막는 값이 있으면, 아예 로딩이 막기거나 내용만 막을 수 있습니다.  
  → 같은 사이트에서 띄우는 경우 `X-Frame-Options: SAMEORIGIN`으로 허용해 두는 것이 좋습니다. (이미 API에서 설정함)
- **PDF를 텍스트처럼 다루는 경우**: 인코딩 등으로 바이너리가 깨지면 내용이 비정상적으로 나오거나 빈 페이지처럼 보일 수 있습니다.  
  → 서버에서는 **항상 바이너리(Buffer)로 읽고 그대로 전송**하는 것이 안전합니다.

## 대응 방법

1. **새 탭에서 열기**  
   모달 상단의 「새 탭에서 열기」로 PDF를 **전체 페이지**로 열면, 브라우저 내장 뷰어가 제한 없이 동작해 **내용까지 정상 표시**됩니다.

2. **PDF.js로 직접 렌더링 (권장)**  
   Mozilla PDF.js처럼 **JavaScript로 PDF를 파싱해서 캔버스에 그리는 방식**을 쓰면, embed/iframe 제한과 관계없이 **같은 페이지(모달) 안에서 내용까지 안정적으로** 보여줄 수 있습니다.  
   이 경우 “페이지 수만 보이고 내용은 안 보인다”는 문제를 근본적으로 피할 수 있습니다.

3. **다른 브라우저에서 확인**  
   같은 PDF를 Firefox 등 다른 브라우저에서 embed로 열어 보면, 브라우저마다 동작이 달라 내용이 보이는 경우가 있습니다.

## 정리

- **페이지 수만 나오고 내용이 안 나오는 것**은, 주로 **embed/iframe 안에서 브라우저가 PDF 본문 렌더링을 제한**하기 때문입니다.
- 당장은 **「새 탭에서 열기」**로 전체 화면에서 보시고,  
  모달 안에서까지 완전히 보이게 하려면 **PDF.js 등으로 직접 렌더링**하는 방식으로 바꾸는 것이 좋습니다.
